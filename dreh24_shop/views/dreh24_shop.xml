<?xml version="1.0"?>
<openerp>
  <data>
    <!-- Change list view -->
    <template id="website_products_item" inherit_id="website_sale.products_item">
      <!-- Mark diameter and length bold -->
      <xpath expr="//section//h5" position="replace">
        <h5 t-if="' M' in product.name">
          <a itemprop="name" t-att-href="keep('/shop/product/%s' % slug(product), page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))">
            <span t-esc="product.name.split(' M')[0]"/>
            <strong>
              <span t-esc="'M' + product.name.split(' M')[1].split(' ')[0]"/>
            </strong>
            <span t-if="' A' in product.name" t-esc="product.name.split(' M')[1].split(' ')[1]"/>
        </a>
      </h5>
      </xpath>
      <!-- Choose price of sales price unit and add gross price -->
      <xpath expr="//div[@itemprop='offers']/b" position="replace">
        <t t-if="country_id != 'CH'">
            <t t-set="pack_price" t-value="compute_currency(product.price * product.product_variant_ids.uom_so_id.factor_inv / product.uom_id.factor_inv)"/>
        </t>
        <t t-if="'CH' in country_id">
            <t t-set="pack_price" t-value="compute_currency(product.list_price_ch * product.product_variant_ids.uom_so_id.factor_inv / product.uom_id.factor_inv)"/>
        </t>
        <b t-if="country_id in 'CH'" itemprop="priceCurrency">CHF</b>
        <b class="oe_price" style="white-space: nowrap;" t-esc="str('%.2f' % pack_price).replace('.',',')"/>
        <t t-if="country_id != 'CH'"><b itemprop="priceCurrency" t-esc="pricelist.currency_id.symbol"/></t>
        <span  t-if="country_id != 'CH'" style="margin-left:0.5cm; font-size:8pt; font-weight:normal;">
            (<span t-esc="str('%.2f' % (pack_price * 1.19)).replace('.',',')"/>
            <span itemprop="priceCurrency" t-esc="pricelist.currency_id.symbol"/> inkl. MwSt.)
        </span>
      </xpath>
   </template>

    <!-- Add gross price to product view -->

    <template id="website_product_price" inherit_id="website_sale.product_price">
      <xpath expr="//h4[@class='oe_price_h4 css_editable_mode_hidden']" position="replace">
        <h4 class="oe_price_h4 css_editable_mode_hidden">
          <t t-if="country_id != 'CH'">
            <t t-set="pack_price" t-value="compute_currency(product.price * product.product_variant_ids.uom_so_id.factor_inv / 100)"/>
          </t>
          <t t-if="country_id == 'CH'">
            <t t-set="pack_price" t-value="compute_currency(product.list_price_ch * product.product_variant_ids.uom_so_id.factor_inv / product.product_variant_ids.uom_id.factor_inv)"/>
          </t>
          <b t-if="country_id == 'CH'" itemprop="priceCurrency">CHF</b>
          <b class="oe_price" style="white-space: nowrap;" t-esc="str('%.2f' % pack_price).replace('.',',')"/>
          <t t-if="country_id != 'CH'"><b itemprop="priceCurrency" t-esc="pricelist.currency_id.symbol"/></t>
          <span t-if="country_id != 'CH'" style="margin-left:1cm; font-size:8pt">
            (<span t-esc="str('%.2f' % (pack_price * 1.19)).replace('.',',')"/>
            <span itemprop="priceCurrency" t-esc="pricelist.currency_id.symbol"/> inkl. MwSt.)
          </span>
        </h4>
      </xpath>
    </template>
    
    <!-- Add sale unit to product description on website payment view -->
    <template id="website_payment" inherit_id="website_sale.payment">
      <xpath expr="//td[@t-if='line.product_id.product_tmpl_id']//strong" position="replace">
        <strong t-field="line.product_id.name"/><br/>
        Verpackungseinheit: <span t-field="line.product_id.uom_so_id.name"/>
      </xpath>
      <xpath expr="//div[@t-field='acquirer.pre_msg']" position="after">
        <div>
           Durch Anklicken des Buttons „zahlungspflichtig bestellen“ kommt ein Vertrag zustande,
           dessen Grundlage die derzeit gültigen  <a href="/page/dreh24_shop.agb">AGBs</a> sowie
           unsere Hinweise zum <a href="/page/dreh24_shop.datenschutz">Datenschutz</a> sind.
           Wenn Sie diese gelesen haben und damit einverstanden sind, klicken Sie bitte den Button
           „zahlungspflichtig bestellen“.
        </div>
      </xpath>
   </template>

   <!-- Website delivery -->
   <template id="website_delivery" inherit_id="website_sale_delivery.payment_delivery">
     <xpath expr="//div[@id='delivery_carrier']//ul" position="after">
        <div>
          Expressversand nur möglich bei Bestellungen bis 12 Uhr (Mo-Fr).
        </div>
      </xpath>
    </template>

    <!-- Add top margin for image on product description page -->
    <template id="website_product" inherit_id="website_sale.product">
      <xpath expr="//div/div[@class='col-sm-7 col-md-7 col-lg-7']" position="replace">
        <div class="col-sm-7 col-md-7 col-lg-7" style="margin-top:50px">
          <span itemprop="image" t-field="product.image"
            t-field-options='{"widget": "image", "class": "product_detail_img"}'/>
        </div>
      </xpath>
      <xpath expr="//p[@field='product.description_sale']" position="replace">
        <div class="text-muted">
          <div class="text-muted">
              Preis / 100 Stück: 
              <t t-if="country_id == 'CH'">
                CHF <span t-field="product.list_price_ch"/>
              </t>
              <t t-if="country_id != 'CH'">
                <span t-field="product.list_price"/> €
              </t>
              <p t-field="product.description_sale" class="text-muted"/>
          </div>          
        </div>
      </xpath>
    </template>
        
    <!-- Remove logo on "Home" page and add paading on top-->
    <template id="website_logo" inherit_id="website.layout_logo_show">
      <xpath expr="//img" position="replace">
        <img t-if="not disable_logo" src="/logo.png" style="padding-top:10px"/>
      </xpath>        
    </template>
    
    <!-- Add style sheets to template -->
    <template id="website_style" inherit_id="website.layout">
      <xpath expr="//head" position="inside">
        <link rel="stylesheet" type="text/css" href="/dreh24_shop/static/src/css/shop.css"/>
      </xpath>
    </template>
    
    <!-- Use custom footer -->
    <template id="website_footer" inherit_id="website.footer_custom">
      <xpath expr="//div[@class='row']" position="replace">
        <div class="row">
          <div class="col-md-3"> 
            <h4>Unternehmen</h4>
            <ul class="list-unstyled" id="products">
              <li><a href="/page/aboutus">Über uns</a></li>
              <li><a href="/page/dreh24_shop.agb">AGB</a></li>
              <li><a href="/page/dreh24_shop.widerruf">Widerrufsbelehrung</a></li>
              <li><a href="/page/dreh24_shop.datenschutz">Datenschutzerklärung</a></li>
              <li><a href="/page/dreh24_shop.versandkosten">Versandkosten</a></li>
              <li><a href="/page/dreh24_shop.impressum">Impressum</a></li>
            </ul>
          </div>
          <div class="col-md-3">
            <h4>Kontakt</h4>
            <img class="img img-responsive mb16"
              src="/dreh24_shop/static/src/img/dreh24_logo.png"
              style="width:150px"/>
            <p>
              Schraubengroßhandel<br/>
              Webshop
            </p>
            <p>
              Tel. +41 (0) 52 740 34 33<br/>
              mail: <a href="mailto:office@dreh24.com">office@dreh24.com</a>
            </p>
            <p>
              Kaltenbacherstraße 24<br/>
              8260 Stein am Rhein
            </p>
          </div>
          <div class="col-md-3">
            <h4 style="color:rgba(0, 0, 0, 0.0)">...</h4>
            <p>
              Außenlager<br/>
              Deutschland
            </p>
            <p>
              Tel.  +49 (0) 7941 630 62<br/>
              Fax. +49 (0) 7941 339 89
            </p>
            <p>
              mail: <a href="mailto:office@dreh24.com">office@dreh24.com</a>
            </p>
            <p>
              Zeilbaumweg 30<br/>
              74613 Öhringen
            </p>
          </div>
          <div class="col-md-3">
            <h4>Partnerfirmen</h4>
            <p>
              <a href="http://weippert-kunststofftechnik.de/">
                Weippert Kunststofftechnik GmbH &amp; Co. KG, Öhringen
              </a>
            </p>
            <p>
                Weippert Kunststofftechnik GmbH, Dornbirn
            </p>
          </div>
        </div>
      </xpath>
    </template>
  </data>
</openerp>
